<!--question-detail.wxml-->
<view class="container">
  <!-- é¢˜ç›®å¤´éƒ¨ä¿¡æ¯ -->
  <view class="question-header">
    <view class="question-title">{{questionData.title}}</view>
    <view class="question-meta">
      <text class="difficulty difficulty-{{questionData.difficulty}}">{{questionData.difficultyText}}</text>
      <view class="question-actions">
        <view class="action-btn {{questionData.isCollected ? 'collected' : ''}}" bindtap="onToggleCollect">
          <text class="action-icon">{{questionData.isCollected ? 'â­' : 'â˜†'}}</text>
          <text class="action-text">æ”¶è—</text>
        </view>
      </view>
    </view>
  </view>

  <!-- é¢˜ç›®å†…å®¹ -->
  <scroll-view class="question-content" scroll-y enhanced="true">
    <!-- é¢˜ç›®æè¿° -->
    <view class="content-section">
      <view class="section-title">é¢˜ç›®æè¿°</view>
      <rich-text class="question-description" nodes="{{questionData.description}}"></rich-text>
    </view>

    <!-- ç¤ºä¾‹ -->
    <view class="content-section" wx:if="{{questionData.examples && questionData.examples.length > 0}}">
      <view class="section-title">ç¤ºä¾‹</view>
      <view class="example-item" wx:for="{{questionData.examples}}" wx:key="index">
        <view class="example-title">ç¤ºä¾‹ {{index + 1}}ï¼š</view>
        <view class="example-content">
          <view class="example-input">
            <text class="label">è¾“å…¥ï¼š</text>
            <text class="value">{{item.input}}</text>
          </view>
          <view class="example-output">
            <text class="label">è¾“å‡ºï¼š</text>
            <text class="value">{{item.output}}</text>
          </view>
          <view class="example-explanation" wx:if="{{item.explanation}}">
            <text class="label">è§£é‡Šï¼š</text>
            <text class="value">{{item.explanation}}</text>
          </view>
        </view>
      </view>
    </view>

    <!-- æç¤º -->
    <view class="content-section" wx:if="{{questionData.hints && questionData.hints.length > 0}}">
      <view class="section-title">æç¤º</view>
      <view class="hints-list">
        <view class="hint-item" wx:for="{{questionData.hints}}" wx:key="index">
          <text class="hint-text">{{index + 1}}. {{item}}</text>
        </view>
      </view>
    </view>

    <!-- çº¦æŸæ¡ä»¶ -->
    <view class="content-section" wx:if="{{questionData.constraints && questionData.constraints.length > 0}}">
      <view class="section-title">çº¦æŸæ¡ä»¶</view>
      <view class="constraints-list">
        <view class="constraint-item" wx:for="{{questionData.constraints}}" wx:key="index">
          <text class="constraint-text">â€¢ {{item}}</text>
        </view>
      </view>
    </view>
  </scroll-view>

  <!-- åº•éƒ¨æ“ä½œæŒ‰é’® -->
  <view class="question-footer">
    <view class="footer-btn secondary" bindtap="onShowSolution">
      <text class="btn-icon">ğŸ’¡</text>
      <text class="btn-text">æŸ¥çœ‹è§£ç­”</text>
    </view>
    <view class="footer-btn primary" bindtap="onStartAnswer">
      <text class="btn-icon">âœï¸</text>
      <text class="btn-text">å¼€å§‹ç­”é¢˜</text>
    </view>
  </view>
</view>

<!-- è§£ç­”å¼¹çª— -->
<view class="solution-modal {{showSolution ? 'show' : ''}}" wx:if="{{showSolution}}">
  <view class="modal-overlay" bindtap="onCloseSolution"></view>
  <view class="modal-content">
    <view class="modal-header">
      <text class="modal-title">å‚è€ƒè§£ç­”</text>
      <view class="modal-close" bindtap="onCloseSolution">Ã—</view>
    </view>
    <scroll-view class="modal-body" scroll-y>
      <view class="solution-section">
        <view class="solution-title">è§£é¢˜æ€è·¯</view>
        <rich-text class="solution-text" nodes="{{questionData.solution.approach}}"></rich-text>
      </view>
      <view class="solution-section" wx:if="{{questionData.solution.code}}">
        <view class="solution-title">ä»£ç å®ç°</view>
        <view class="code-block">
          <text class="code-text">{{questionData.solution.code}}</text>
        </view>
      </view>
      <view class="solution-section" wx:if="{{questionData.solution.complexity}}">
        <view class="solution-title">å¤æ‚åº¦åˆ†æ</view>
        <rich-text class="solution-text" nodes="{{questionData.solution.complexity}}"></rich-text>
      </view>
    </scroll-view>
  </view>
</view>